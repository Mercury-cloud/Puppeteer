{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./src/background/index.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./src/code-generator/pptr-actions.js","webpack:///./src/models/extension-ui-actions.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./src/models/extension-control-messages.js","webpack:///./node_modules/core-js/library/modules/_is-object.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","core","version","__e","global","window","Math","self","Function","__g","isObject","it","TypeError","RecordingController","_classCallCheck3","default","this","_recording","_boundedMessageHandler","_boundedNavigationHandler","_boundedWaitHandler","_boundedMenuHandler","_boundedKeyCommandHandler","_badgeState","_isPaused","_hasGoto","_hasViewPort","_menuId","_menuOptions","SCREENSHOT","SCREENSHOT_CLIPPED","_this","chrome","extension","onConnect","addListener","port","console","debug","onMessage","msg","action","actions","START","start","STOP","stop","CLEAN_UP","cleanUp","PAUSE","pause","UN_PAUSE","unPause","_this2","injectScript","handleMessage","handleNavigation","handleWait","runtime","webNavigation","onCompleted","onBeforeNavigate","browserAction","setIcon","path","setBadgeText","text","setBadgeBackgroundColor","color","contextMenus","removeAll","id","title","contexts","parentId","handleMenuInteraction","onClicked","handleKeyCommands","commands","onCommand","length","removeListener","storage","local","set","recording","cb","remove","href","selector","undefined","pptrActions","GOTO","VIEWPORT","NAVIGATION","sender","control","handleControlMessage","frameId","frameUrl","url","push","ctrl","EVENT_RECORDER_STARTED","GET_VIEWPORT_SIZE","recordCurrentViewportSize","coordinates","GET_CURRENT_URL","recordCurrentUrl","GET_SCREENSHOT","recordScreenshot","_ref","recordNavigation","info","tab","menuItemId","toggleScreenShotMode","TOGGLE_SCREENSHOT_MODE","TOGGLE_SCREENSHOT_CLIPPED_MODE","command","tabs","query","active","currentWindow","sendMessage","executeScript","file","allFrames","recordingController","boot","bitmap","configurable","writable","S","fn","val","toString","valueOf","a","instance","Constructor","_defineProperty2","obj","_interopRequireDefault","defineProperties","target","props","descriptor","protoProps","staticProps","document","is","createElement","aFunction","that","b","apply","arguments","anObject","IE8_DOM_DEFINE","toPrimitive","dP","f","O","P","Attributes","e","$Object","desc","$export","F","WAITFORSELECTOR","NAVIGATION_PROMISE","FRAME_SET","ctx","hide","has","type","source","own","out","IS_FORCED","IS_GLOBAL","G","IS_STATIC","IS_PROTO","IS_BIND","B","IS_WRAP","W","expProto","C","virtual","R","U","createDesc","exec"],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 127);\n","var core = module.exports = { version: '2.5.7' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","import pptrActions from '../code-generator/pptr-actions'\nimport ctrl from '../models/extension-control-messages'\nimport actions from '../models/extension-ui-actions'\n\nclass RecordingController {\n  constructor () {\n    this._recording = []\n    this._boundedMessageHandler = null\n    this._boundedNavigationHandler = null\n    this._boundedWaitHandler = null\n    this._boundedMenuHandler = null\n    this._boundedKeyCommandHandler = null\n    this._badgeState = ''\n    this._isPaused = false\n\n    // Some events are sent double on page navigations to simplify the event recorder.\n    // We keep some simple state to disregard events if needed.\n    this._hasGoto = false\n    this._hasViewPort = false\n\n    this._menuId = 'PUPPETEER_RECORDER_CONTEXT_MENU'\n    this._menuOptions = {\n      SCREENSHOT: 'SCREENSHOT',\n      SCREENSHOT_CLIPPED: 'SCREENSHOT_CLIPPED'\n    }\n  }\n\n  boot () {\n    chrome.extension.onConnect.addListener(port => {\n      console.debug('listeners connected')\n      port.onMessage.addListener(msg => {\n        if (msg.action && msg.action === actions.START) this.start()\n        if (msg.action && msg.action === actions.STOP) this.stop()\n        if (msg.action && msg.action === actions.CLEAN_UP) this.cleanUp()\n        if (msg.action && msg.action === actions.PAUSE) this.pause()\n        if (msg.action && msg.action === actions.UN_PAUSE) this.unPause()\n      })\n    })\n  }\n\n  start () {\n    console.debug('start recording')\n    this.cleanUp(() => {\n      this._badgeState = 'rec'\n\n      this._hasGoto = false\n      this._hasViewPort = false\n\n      this.injectScript()\n\n      this._boundedMessageHandler = this.handleMessage.bind(this)\n      this._boundedNavigationHandler = this.handleNavigation.bind(this)\n      this._boundedWaitHandler = this.handleWait.bind(this)\n\n      chrome.runtime.onMessage.addListener(this._boundedMessageHandler)\n      chrome.webNavigation.onCompleted.addListener(this._boundedNavigationHandler)\n      chrome.webNavigation.onBeforeNavigate.addListener(this._boundedWaitHandler)\n\n      chrome.browserAction.setIcon({ path: './images/icon-green.png' })\n      chrome.browserAction.setBadgeText({ text: this._badgeState })\n      chrome.browserAction.setBadgeBackgroundColor({ color: '#FF0000' })\n\n      /**\n       * Right click menu setup\n       */\n\n      chrome.contextMenus.removeAll()\n\n      // add the parent and its children\n\n      chrome.contextMenus.create({\n        id: this._menuId,\n        title: 'Puppeteer Recorder',\n        contexts: ['all']\n      })\n\n      chrome.contextMenus.create({\n        id: this._menuId + this._menuOptions.SCREENSHOT,\n        title: 'Take Screenshot (Ctrl+Shift+A)',\n        parentId: this._menuId,\n        contexts: ['all']\n      })\n\n      chrome.contextMenus.create({\n        id: this._menuId + this._menuOptions.SCREENSHOT_CLIPPED,\n        title: 'Take Screenshot Clipped (Ctrl+Shift+S)',\n        parentId: this._menuId,\n        contexts: ['all']\n      })\n\n      // add the handlers\n\n      this._boundedMenuHandler = this.handleMenuInteraction.bind(this)\n      chrome.contextMenus.onClicked.addListener(this._boundedMenuHandler)\n\n      this._boundedKeyCommandHandler = this.handleKeyCommands.bind(this)\n      chrome.commands.onCommand.addListener(this._boundedKeyCommandHandler)\n    })\n  }\n\n  stop () {\n    console.debug('stop recording')\n    this._badgeState = this._recording.length > 0 ? '1' : ''\n\n    chrome.runtime.onMessage.removeListener(this._boundedMessageHandler)\n    chrome.webNavigation.onCompleted.removeListener(this._boundedNavigationHandler)\n    chrome.webNavigation.onBeforeNavigate.removeListener(this._boundedWaitHandler)\n    chrome.contextMenus.onClicked.removeListener(this._boundedMenuHandler)\n\n    chrome.browserAction.setIcon({ path: './images/icon-black.png' })\n    chrome.browserAction.setBadgeText({text: this._badgeState})\n    chrome.browserAction.setBadgeBackgroundColor({color: '#45C8F1'})\n\n    chrome.storage.local.set({ recording: this._recording }, () => {\n      console.debug('recording stored')\n    })\n  }\n\n  pause () {\n    console.debug('pause')\n    this._badgeState = '❚❚'\n    chrome.browserAction.setBadgeText({ text: this._badgeState })\n    this._isPaused = true\n  }\n\n  unPause () {\n    console.debug('unpause')\n    this._badgeState = 'rec'\n    chrome.browserAction.setBadgeText({ text: this._badgeState })\n    this._isPaused = false\n  }\n\n  cleanUp (cb) {\n    console.debug('cleanup')\n    this._recording = []\n    chrome.browserAction.setBadgeText({ text: '' })\n    chrome.storage.local.remove('recording', () => {\n      console.debug('stored recording cleared')\n      if (cb) cb()\n    })\n  }\n\n  recordCurrentUrl (href) {\n    if (!this._hasGoto) {\n      console.debug('recording goto* for:', href)\n      this.handleMessage({selector: undefined, value: undefined, action: pptrActions.GOTO, href})\n      this._hasGoto = true\n    }\n  }\n\n  recordCurrentViewportSize (value) {\n    if (!this._hasViewPort) {\n      this.handleMessage({selector: undefined, value, action: pptrActions.VIEWPORT})\n      this._hasViewPort = true\n    }\n  }\n\n  recordNavigation () {\n    this.handleMessage({ selector: undefined, value: undefined, action: pptrActions.NAVIGATION })\n  }\n\n  recordScreenshot (value) {\n    this.handleMessage({ selector: undefined, value, action: pptrActions.SCREENSHOT })\n  }\n\n  handleMessage (msg, sender) {\n    if (msg.control) return this.handleControlMessage(msg, sender)\n\n    // to account for clicks etc. we need to record the frameId and url to later target the frame in playback\n    msg.frameId = sender ? sender.frameId : null\n    msg.frameUrl = sender ? sender.url : null\n\n    if (!this._isPaused) {\n      this._recording.push(msg)\n      chrome.storage.local.set({ recording: this._recording }, () => {\n        console.debug('stored recording updated')\n      })\n    }\n  }\n\n  handleControlMessage (msg, sender) {\n    if (msg.control === ctrl.EVENT_RECORDER_STARTED) chrome.browserAction.setBadgeText({ text: this._badgeState })\n    if (msg.control === ctrl.GET_VIEWPORT_SIZE) this.recordCurrentViewportSize(msg.coordinates)\n    if (msg.control === ctrl.GET_CURRENT_URL) this.recordCurrentUrl(msg.href)\n    if (msg.control === ctrl.GET_SCREENSHOT) this.recordScreenshot(msg.value)\n  }\n\n  handleNavigation ({ frameId }) {\n    console.debug('frameId is:', frameId)\n    this.injectScript()\n    if (frameId === 0) {\n      this.recordNavigation()\n    }\n  }\n\n  handleMenuInteraction (info, tab) {\n    console.debug('context menu clicked')\n    switch (info.menuItemId) {\n      case (this._menuId + this._menuOptions.SCREENSHOT):\n        this.toggleScreenShotMode(actions.TOGGLE_SCREENSHOT_MODE)\n        break\n      case (this._menuId + this._menuOptions.SCREENSHOT_CLIPPED):\n        this.toggleScreenShotMode(actions.TOGGLE_SCREENSHOT_CLIPPED_MODE)\n        break\n    }\n  }\n\n  handleKeyCommands (command) {\n    switch (command) {\n      case actions.TOGGLE_SCREENSHOT_MODE:\n        this.toggleScreenShotMode(actions.TOGGLE_SCREENSHOT_MODE)\n        break\n      case actions.TOGGLE_SCREENSHOT_CLIPPED_MODE:\n        this.toggleScreenShotMode(actions.TOGGLE_SCREENSHOT_CLIPPED_MODE)\n        break\n    }\n  }\n\n  toggleScreenShotMode (action) {\n    console.debug('toggling screenshot mode')\n    chrome.tabs.query({active: true, currentWindow: true}, tabs => {\n      chrome.tabs.sendMessage(tabs[0].id, { action })\n    })\n  }\n\n  handleWait () {\n    chrome.browserAction.setBadgeText({ text: 'wait' })\n  }\n\n  injectScript () {\n    chrome.tabs.executeScript({ file: 'content-script.js', allFrames: true })\n  }\n}\n\nconsole.debug('booting recording controller')\nwindow.recordingController = new RecordingController()\nwindow.recordingController.boot()\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","export default {\n  GOTO: 'GOTO',\n  VIEWPORT: 'VIEWPORT',\n  WAITFORSELECTOR: 'WAITFORSELECTOR',\n  NAVIGATION: 'NAVIGATION',\n  NAVIGATION_PROMISE: 'NAVIGATION_PROMISE',\n  FRAME_SET: 'FRAME_SET',\n  SCREENSHOT: 'SCREENSHOT'\n}\n","export default {\n  TOGGLE_SCREENSHOT_MODE: 'TOGGLE_SCREENSHOT_MODE',\n  TOGGLE_SCREENSHOT_CLIPPED_MODE: 'TOGGLE_SCREENSHOT_CLIPPED_MODE',\n  START: 'START',\n  STOP: 'STOP',\n  CLEAN_UP: 'CLEAN_UP',\n  PAUSE: 'PAUSE',\n  UN_PAUSE: 'UN_PAUSE'\n}\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","export default {\n  EVENT_RECORDER_STARTED: 'EVENT_RECORDER_STARTED',\n  GET_VIEWPORT_SIZE: 'GET_VIEWPORT_SIZE',\n  GET_CURRENT_URL: 'GET_CURRENT_URL',\n  GET_SCREENSHOT: 'GET_SCREENSHOT'\n}\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n"],"sourceRoot":""}